<div class="ng-cropper-container border border-gray-300 rounded-lg shadow-lg" [class]="cropperContainerClass()">
    @if (showToolbar()) {
    <div
        class="pointer-events-none absolute z-[2147483647]"
        [style.top]="toolbarPosition() === 'top' ? '0' : null"
        [style.bottom]="toolbarPosition() === 'bottom' ? '0' : null"
        style="left: 0; right: 0"
    >
        <div class="flex justify-center py-2">
            <div class="pointer-events-auto">
                @defer (when showToolbar()) {
                <ngCropperToolbar [cropperRef]="cropperSelf" />
                }@placeholder {
                <div class="flex items-center">
                    <span class="text-gray-500">Loading toolbar...</span>
                </div>
                }
            </div>
        </div>
    </div>
    }
    <cropper-canvas class="cropper-canvas" #cropperCanvas [class]="cropperCanvasClass()">
        <cropper-image class="cropper-image" #cropperImage [class]="cropperImageClass()" />

        <cropper-shade #cropperShade class="cropper-shade" [class]="cropperShadeClass()" />

        <cropper-handle #cropperHandle class="cropper-handle cropper-handle-select" [class]="cropperHandleClass()" action="select" mode="open" plain />

        <cropper-selection #cropperSelection class="cropper-selection" [class]="cropperSelectionClass()">
            <cropper-grid #cropperGrid class="cropper-grid" role="grid" />

            <cropper-crosshair #cropperCrosshair class="cropper-crosshair" [class]="cropperCrosshairClass()" />

            <!-- Resize handles -->
            <cropper-handle
                #cropperHandle
                class="cropper-handle cropper-handle-move"
                [class]="cropperHandleClass()"
                initial-coverage="0.5"
                action="move"
                slottable
                movable
                resizable
            />
            <cropper-handle #cropperHandle class="cropper-handle n-resize" [class]="cropperHandleClass()" action="n-resize" />
            <cropper-handle #cropperHandle class="cropper-handle e-resize" [class]="cropperHandleClass()" action="e-resize" />
            <cropper-handle #cropperHandle class="cropper-handle s-resize" [class]="cropperHandleClass()" action="s-resize" />
            <cropper-handle #cropperHandle class="cropper-handle w-resize" [class]="cropperHandleClass()" action="w-resize" />
            <cropper-handle #cropperHandle class="cropper-handle ne-resize" [class]="cropperHandleClass()" action="ne-resize" />
            <cropper-handle #cropperHandle class="cropper-handle nw-resize" [class]="cropperHandleClass()" action="nw-resize" />
            <cropper-handle #cropperHandle class="cropper-handle se-resize" [class]="cropperHandleClass()" action="se-resize" />
            <cropper-handle #cropperHandle class="cropper-handle sw-resize" [class]="cropperHandleClass()" action="sw-resize" />
        </cropper-selection>
    </cropper-canvas>
</div>
